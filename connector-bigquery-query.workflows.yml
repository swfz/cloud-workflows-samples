- get_random:
    call: googleapis.bigquery.v2.jobs.query
    args:
      projectId: terraform-sample-294414
      body:
        query: "SELECT FORMAT_DATE('%Y%m%d', DATE_SUB(CURRENT_DATE('Asia/Tokyo'), INTERVAL 1 DAY)), FORMAT_DATE('%Y%m%d', DATE_SUB(CURRENT_DATE('Asia/Tokyo'), INTERVAL 8 DAY))"
        useLegacySql: false
    result: query_result

- log_result:
    call: sys.log
    args:
      text: ${query_result}
      severity: INFO

- return_value:
    return: ${"yesterday:" + query_result.rows[0].f[0].v + ", 8 days ago:" + query_result.rows[0].f[1].v}
